From 437696bc72af37a31234c3e2ac024b628dd2835c Mon Sep 17 00:00:00 2001
From: Byron Marohn <combustible@live.com>
Date: Tue, 31 Oct 2017 18:02:46 -0700
Subject: [PATCH 7/8] Monumenta - Disable wither spawning

---
 src/main/java/net/minecraft/server/BlockSkull.java | 69 ----------------------
 1 file changed, 69 deletions(-)

diff --git a/src/main/java/net/minecraft/server/BlockSkull.java b/src/main/java/net/minecraft/server/BlockSkull.java
index 2c3bb3c..1a4a7b9 100644
--- a/src/main/java/net/minecraft/server/BlockSkull.java
+++ b/src/main/java/net/minecraft/server/BlockSkull.java
@@ -157,75 +157,6 @@ public class BlockSkull extends BlockTileEntity {
     }
 
     public void a(World world, BlockPosition blockposition, TileEntitySkull tileentityskull) {
-        if (world.captureBlockStates) return; // CraftBukkit
-        if (tileentityskull.getSkullType() == 1 && blockposition.getY() >= 2 && world.getDifficulty() != EnumDifficulty.PEACEFUL && !world.isClientSide) {
-            ShapeDetector shapedetector = this.g();
-            ShapeDetector.ShapeDetectorCollection shapedetector_shapedetectorcollection = shapedetector.a(world, blockposition);
-
-            if (shapedetector_shapedetectorcollection != null) {
-                // CraftBukkit start - Use BlockStateListPopulator
-                BlockStateListPopulator blockList = new BlockStateListPopulator(world.getWorld());
-                int i;
-
-                for (i = 0; i < 3; ++i) {
-                    ShapeDetectorBlock shapedetectorblock = shapedetector_shapedetectorcollection.a(i, 0, 0);
-
-                    // CraftBukkit start
-                    // world.setTypeAndData(shapedetectorblock.getPosition(), shapedetectorblock.a().set(BlockSkull.NODROP, Boolean.valueOf(true)), 2);
-                    BlockPosition pos = shapedetectorblock.getPosition();
-                    IBlockData data = shapedetectorblock.a().set(BlockSkull.NODROP, Boolean.valueOf(true));
-                    blockList.setTypeAndData(pos.getX(), pos.getY(), pos.getZ(), data.getBlock(), data.getBlock().toLegacyData(data), 2);
-                    // CraftBukkit end
-                }
-
-                for (i = 0; i < shapedetector.c(); ++i) {
-                    for (int j = 0; j < shapedetector.b(); ++j) {
-                        ShapeDetectorBlock shapedetectorblock1 = shapedetector_shapedetectorcollection.a(i, j, 0);
-
-                        // CraftBukkit start
-                        // world.setTypeAndData(shapedetectorblock1.getPosition(), Blocks.AIR.getBlockData(), 2);
-                        BlockPosition pos = shapedetectorblock1.getPosition();
-                        blockList.setTypeAndData(pos.getX(), pos.getY(), pos.getZ(), Blocks.AIR, 0, 2);
-                        // CraftBukkit end
-                    }
-                }
-
-                BlockPosition blockposition1 = shapedetector_shapedetectorcollection.a(1, 0, 0).getPosition();
-                EntityWither entitywither = new EntityWither(world);
-                BlockPosition blockposition2 = shapedetector_shapedetectorcollection.a(1, 2, 0).getPosition();
-
-                entitywither.setPositionRotation((double) blockposition2.getX() + 0.5D, (double) blockposition2.getY() + 0.55D, (double) blockposition2.getZ() + 0.5D, shapedetector_shapedetectorcollection.getFacing().k() == EnumDirection.EnumAxis.X ? 0.0F : 90.0F, 0.0F);
-                entitywither.aN = shapedetector_shapedetectorcollection.getFacing().k() == EnumDirection.EnumAxis.X ? 0.0F : 90.0F;
-                entitywither.p();
-                Iterator iterator = world.a(EntityPlayer.class, entitywither.getBoundingBox().g(50.0D)).iterator();
-
-                // CraftBukkit start
-                if (world.addEntity(entitywither, SpawnReason.BUILD_WITHER)) {
-                    blockList.updateList();
-
-                while (iterator.hasNext()) {
-                    EntityPlayer entityplayer = (EntityPlayer) iterator.next();
-
-                    CriterionTriggers.m.a(entityplayer, (Entity) entitywither);
-                }
-
-                int k;
-
-                for (k = 0; k < 120; ++k) {
-                    world.addParticle(EnumParticle.SNOWBALL, (double) blockposition1.getX() + world.random.nextDouble(), (double) (blockposition1.getY() - 2) + world.random.nextDouble() * 3.9D, (double) blockposition1.getZ() + world.random.nextDouble(), 0.0D, 0.0D, 0.0D, new int[0]);
-                }
-
-                for (k = 0; k < shapedetector.c(); ++k) {
-                    for (int l = 0; l < shapedetector.b(); ++l) {
-                        ShapeDetectorBlock shapedetectorblock2 = shapedetector_shapedetectorcollection.a(k, l, 0);
-
-                        world.update(shapedetectorblock2.getPosition(), Blocks.AIR, false);
-                    }
-                }
-                } // CraftBukkit end
-
-            }
-        }
     }
 
     public IBlockData fromLegacyData(int i) {
-- 
2.7.4

