#!/usr/bin/env python3

import os
import sys

sys.path.append(os.path.join(os.path.dirname(__file__),'..'))

from lib.item_test import ItemTest

test_item = ItemTest(
    test_name="Rules: 1.16 Upgrade: Potion Injector",
    template_item=r'''{id: "minecraft:black_shulker_box", tag: {Monumenta: {Region: "valley", Location: "verdant", Tier: "epic", Lore: ['{"text":"Attuning to a potion allows for instant"}', '{"text":"drinking if the potion is present in"}', '{"text":"your inventory (non-hotbar) or stored"}', '{"text":"within the Potion Injector."}', '{"color":"gray","extra":[{"text":"Operated using "},{"keybind":"key.attack"},{"text":" while in main hand."}],"text":""}', '{"color":"gray","extra":[{"keybind":"key.use"},{"text":" + "},{"keybind":"key.sneak"},{"text":" to clear current potion."}],"text":""}']}, Enchantments: [{id: "minecraft:power", lvl: 1s}], BlockEntityTag: {y: 0, z: 0, x: 0}, HideFlags: -1, plain: {display: {Name: "Potion Injector", Lore: ["Selected Potion:", "No Potion Selected", "King's Valley : Epic", "Verdant Remnants", "Attuning to a potion allows for instant", "drinking if the potion is present in", "your inventory (non-hotbar) or stored", "within the Potion Injector.", "Operated using key.attack while in main hand.", "key.use + key.sneak to clear current potion."]}}, display: {Name: '{"bold":true,"italic":false,"underlined":true,"color":"#158315","text":"Potion Injector"}', Lore: ['{"italic":false,"color":"yellow","text":"Selected Potion:"}', '{"italic":false,"color":"red","text":"No Potion Selected"}', '{"italic":false,"color":"dark_gray","extra":[{"bold":true,"italic":false,"color":"#ffd700","text":"Epic"}],"text":"King\\u0027s Valley : "}', '{"italic":false,"color":"#158315","text":"Verdant Remnants"}', '{"italic":false,"color":"dark_gray","extra":[{"text":"Attuning to a potion allows for instant"}],"text":""}', '{"italic":false,"color":"dark_gray","extra":[{"text":"drinking if the potion is present in"}],"text":""}', '{"italic":false,"color":"dark_gray","extra":[{"text":"your inventory (non-hotbar) or stored"}],"text":""}', '{"italic":false,"color":"dark_gray","extra":[{"text":"within the Potion Injector."}],"text":""}', '{"italic":false,"color":"dark_gray","extra":[{"color":"gray","extra":[{"text":"Operated using "},{"keybind":"key.attack"},{"text":" while in main hand."}],"text":""}],"text":""}', '{"italic":false,"color":"dark_gray","extra":[{"color":"gray","extra":[{"keybind":"key.use"},{"text":" + "},{"keybind":"key.sneak"},{"text":" to clear current potion."}],"text":""}],"text":""}']}, AttributeModifiers: [{Name: "MMDummy", Operation: 2, UUID: [I; 1646965488, 1206995987, -1924691889, 2034535215], AttributeName: "minecraft:generic.armor_toughness", Amount: 1.0d}]}, Count: 1b}''',
    item_under_test=r'''{Slot: 2b, id: "minecraft:black_shulker_box", tag: {Monumenta: {Region: "valley", Location: "verdant", Tier: "epic", Lore: ['{"text":"Attuning to a potion allows for instant"}', '{"text":"drinking if the potion is present in"}', '{"text":"your inventory (non-hotbar) or stored"}', '{"text":"within the Potion Injector."}', '{"color":"gray","extra":[{"text":"Operated using "},{"keybind":"key.attack"},{"text":" while in main hand."}],"text":""}', '{"color":"gray","extra":[{"keybind":"key.use"},{"text":" + "},{"keybind":"key.sneak"},{"text":" to clear current potion."}],"text":""}', '{"text":"DELME Automation Test","color":"red","bold":true}']}, Enchantments: [{id: "minecraft:power", lvl: 1s}], HideFlags: -1, plain: {display: {Name: "Potion Injector", Lore: ["Selected Potion:", "Potion of Warcry", "King's Valley : Epic", "Verdant Remnants", "Attuning to a potion allows for instant", "drinking if the potion is present in", "your inventory (non-hotbar) or stored", "within the Potion Injector.", "Operated using key.attack while in main hand.", "key.use + key.sneak to clear current potion.", "DELME Automation Test"]}}, display: {Name: '{"bold":true,"italic":false,"underlined":true,"color":"#158315","text":"Potion Injector"}', Lore: ['{"italic":false,"color":"yellow","text":"Selected Potion:"}', '{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"white","text":"Potion of Warcry"}],"text":""}', '{"italic":false,"color":"dark_gray","extra":[{"bold":true,"italic":false,"color":"#ffd700","text":"Epic"}],"text":"King\\u0027s Valley : "}', '{"italic":false,"color":"#158315","text":"Verdant Remnants"}', '{"italic":false,"color":"dark_gray","extra":[{"text":"Attuning to a potion allows for instant"}],"text":""}', '{"italic":false,"color":"dark_gray","extra":[{"text":"drinking if the potion is present in"}],"text":""}', '{"italic":false,"color":"dark_gray","extra":[{"text":"your inventory (non-hotbar) or stored"}],"text":""}', '{"italic":false,"color":"dark_gray","extra":[{"text":"within the Potion Injector."}],"text":""}', '{"italic":false,"color":"dark_gray","extra":[{"color":"gray","extra":[{"text":"Operated using "},{"keybind":"key.attack"},{"text":" while in main hand."}],"text":""}],"text":""}', '{"italic":false,"color":"dark_gray","extra":[{"color":"gray","extra":[{"keybind":"key.use"},{"text":" + "},{"keybind":"key.sneak"},{"text":" to clear current potion."}],"text":""}],"text":""}', '{"italic":false,"color":"dark_gray","extra":[{"bold":true,"color":"red","text":"DELME Automation Test"}],"text":""}']}, AttributeModifiers: [{Name: "MMDummy", Operation: 2, UUID: [I; 1646965488, 1206995987, -1924691889, 2034535215], AttributeName: "minecraft:generic.armor_toughness", Amount: 1.0d}], BlockEntityTag: {Items: [{Slot: 0b, Count: 1b, tag: {Enchantments: [{id: "minecraft:power", lvl: 1s}], Monumenta: {Stock: {Enchantments: {"Instant Drink": {Level: 1}}}}, HideFlags: 71, CustomPotionColor: 16711680, Potion: "minecraft:mundane", plain: {display: {Name: "Potion of Warcry", Lore: ["Instant Drink"]}}, CustomPotionEffects: [{ShowParticles: 1b, Id: 5b, Duration: 3600, ShowIcon: 1b, Amplifier: 0b, Ambient: 1b}, {ShowParticles: 1b, Id: 6b, Duration: 0, ShowIcon: 1b, Amplifier: 1b, Ambient: 1b}], display: {Name: '{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"white","text":"Potion of Warcry"}],"text":""}', Lore: ['{"italic":false,"color":"gray","text":"Instant Drink"}']}, AttributeModifiers: [{Name: "MMDummy", Operation: 2, UUID: [I; 175200320, -822522902, -1246350599, 1317922984], AttributeName: "minecraft:generic.armor_toughness", Amount: 1.0d}]}, id: "minecraft:potion"}]}}, Count: 1b}''',
    expected_result_item=r'''{Slot: 2b, id: "minecraft:black_shulker_box", tag: {Monumenta: {Region: "valley", Location: "verdant", Tier: "epic", Lore: ['{"text":"Attuning to a potion allows for instant"}', '{"text":"drinking if the potion is present in"}', '{"text":"your inventory (non-hotbar) or stored"}', '{"text":"within the Potion Injector."}', '{"color":"gray","extra":[{"text":"Operated using "},{"keybind":"key.attack"},{"text":" while in main hand."}],"text":""}', '{"color":"gray","extra":[{"keybind":"key.use"},{"text":" + "},{"keybind":"key.sneak"},{"text":" to clear current potion."}],"text":""}']}, Enchantments: [{id: "minecraft:power", lvl: 1s}], HideFlags: -1, plain: {display: {Name: "Potion Injector", Lore: ["Selected Potion:", "Potion of Warcry", "King's Valley : Epic", "Verdant Remnants", "Attuning to a potion allows for instant", "drinking if the potion is present in", "your inventory (non-hotbar) or stored", "within the Potion Injector.", "Operated using key.attack while in main hand.", "key.use + key.sneak to clear current potion."]}}, display: {Name: '{"bold":true,"italic":false,"underlined":true,"color":"#158315","text":"Potion Injector"}', Lore: ['{"italic":false,"color":"yellow","text":"Selected Potion:"}', '{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"white","text":"Potion of Warcry"}],"text":""}', '{"italic":false,"color":"dark_gray","extra":[{"bold":true,"italic":false,"color":"#ffd700","text":"Epic"}],"text":"King\\u0027s Valley : "}', '{"italic":false,"color":"#158315","text":"Verdant Remnants"}', '{"italic":false,"color":"dark_gray","extra":[{"text":"Attuning to a potion allows for instant"}],"text":""}', '{"italic":false,"color":"dark_gray","extra":[{"text":"drinking if the potion is present in"}],"text":""}', '{"italic":false,"color":"dark_gray","extra":[{"text":"your inventory (non-hotbar) or stored"}],"text":""}', '{"italic":false,"color":"dark_gray","extra":[{"text":"within the Potion Injector."}],"text":""}', '{"italic":false,"color":"dark_gray","extra":[{"color":"gray","extra":[{"text":"Operated using "},{"keybind":"key.attack"},{"text":" while in main hand."}],"text":""}],"text":""}', '{"italic":false,"color":"dark_gray","extra":[{"color":"gray","extra":[{"keybind":"key.use"},{"text":" + "},{"keybind":"key.sneak"},{"text":" to clear current potion."}],"text":""}],"text":""}']}, AttributeModifiers: [{Name: "MMDummy", Operation: 2, UUID: [I; 1646965488, 1206995987, -1924691889, 2034535215], AttributeName: "minecraft:generic.armor_toughness", Amount: 1.0d}], BlockEntityTag: {Items: [{Slot: 0b, Count: 1b, tag: {Enchantments: [{id: "minecraft:power", lvl: 1s}], Monumenta: {Stock: {Enchantments: {"Instant Drink": {Level: 1}}}}, HideFlags: 71, CustomPotionColor: 16711680, Potion: "minecraft:mundane", plain: {display: {Name: "Potion of Warcry", Lore: ["Instant Drink"]}}, CustomPotionEffects: [{ShowParticles: 1b, Id: 5b, Duration: 3600, ShowIcon: 1b, Amplifier: 0b, Ambient: 1b}, {ShowParticles: 1b, Id: 6b, Duration: 0, ShowIcon: 1b, Amplifier: 1b, Ambient: 1b}], display: {Name: '{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"white","text":"Potion of Warcry"}],"text":""}', Lore: ['{"italic":false,"color":"gray","text":"Instant Drink"}']}, AttributeModifiers: [{Name: "MMDummy", Operation: 2, UUID: [I; 175200320, -822522902, -1246350599, 1317922984], AttributeName: "minecraft:generic.armor_toughness", Amount: 1.0d}]}, id: "minecraft:potion"}]}}, Count: 1b}'''
)
test_item.run()
