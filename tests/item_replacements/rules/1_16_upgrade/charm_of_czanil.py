#!/usr/bin/env python3

import os
import sys

sys.path.append(os.path.join(os.path.dirname(__file__),'..'))

from lib.item_test import ItemTest

test_item = ItemTest(
    test_name="Rules: 1.16 Upgrade: Tenacity I: Charm of C'Zanil",
    template_item=r'''{id: "minecraft:bone", tag: {plain:{display:{Name:"Charm of C'Zanil",Lore:["Regeneration I","* Magic Wand *","King's Valley : Enhanced Rare","Ephemeral Corridors","The souls scream, yearning to be released.","","When in Main Hand:","4 Attack Speed","4.5 Attack Damage","","When in Off Hand:","+5% Speed","+2 Max Health","+5% Attack Speed"]}},Enchantments:[{id:"minecraft:fire_aspect",lvl:5s},{id:"minecraft:sharpness",lvl:6s}],display:{Name:'{"extra":[{"bold":true,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"gold","text":"Charm of C\'Zanil"}],"text":""}',Lore:['{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"gray","text":"Regeneration I"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"dark_gray","text":"* Magic Wand *"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"dark_gray","text":"King\'s Valley : "},{"bold":true,"italic":false,"color":"yellow","text":"Enhanced Rare"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"red","text":"Ephemeral Corridors"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"dark_gray","text":"The souls scream, yearning to be released."}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"text":""}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"gray","text":"When in Main Hand:"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"dark_green","text":" 4 Attack Speed"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"dark_green","text":" 4.5 Attack Damage"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"text":""}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"gray","text":"When in Off Hand:"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"blue","text":"+5% Speed"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"blue","text":"+2 Max Health"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"blue","text":"+5% Attack Speed"}],"text":""}']},AttributeModifiers:[{Slot:"offhand",Name:"Modifier",Operation:0,UUID:[I;-319241543,-679654345,-1253138128,1382611003],AttributeName:"generic.max_health",Amount:2.0d},{Slot:"offhand",Name:"Modifier",Operation:1,UUID:[I;267246126,1096762845,-1220294487,-1836843357],AttributeName:"generic.movement_speed",Amount:0.05d},{Slot:"offhand",Name:"Modifier",Operation:1,UUID:[I;986714587,-992328412,-1309441710,-1287770970],AttributeName:"generic.attack_speed",Amount:0.05d}],HideFlags:2}, Count: 1b}''',
    item_under_test=r'''{id: "minecraft:bone", tag: {plain:{display:{Name:"Charm of C'Zanil",Lore:["Regeneration I","* Magic Wand *","King's Valley : Enhanced Rare","Ephemeral Corridors","The souls scream, yearning to be released.","","When in Main Hand:","4 Attack Speed","4.5 Attack Damage","","When in Off Hand:","+5% Speed","+2 Max Health","+5% Attack Speed"]}},Enchantments:[{id:"minecraft:fire_aspect",lvl:5s},{id:"minecraft:sharpness",lvl:6s}],display:{Name:'{"extra":[{"bold":true,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"gold","text":"Charm of C\'Zanil"}],"text":""}',Lore:['{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"gray","text":"Regeneration I"}],"text":""}','{"extra":[{"text":"Tenacity I"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"dark_gray","text":"* Magic Wand *"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"dark_gray","text":"King\'s Valley : "},{"bold":true,"italic":false,"color":"yellow","text":"Enhanced Rare"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"red","text":"Ephemeral Corridors"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"dark_gray","text":"The souls scream, yearning to be released."}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"text":""}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"gray","text":"When in Main Hand:"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"dark_green","text":" 4 Attack Speed"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"dark_green","text":" 4.5 Attack Damage"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"text":""}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"gray","text":"When in Off Hand:"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"blue","text":"+5% Speed"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"blue","text":"+2 Max Health"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"blue","text":"+5% Attack Speed"}],"text":""}']},AttributeModifiers:[{Slot:"offhand",Name:"Modifier",Operation:0,UUID:[I;-319241543,-679654345,-1253138128,1382611003],AttributeName:"minecraft:generic.max_health",Amount:2.0d},{Slot:"offhand",Name:"Modifier",Operation:1,UUID:[I;267246126,1096762845,-1220294487,-1836843357],AttributeName:"minecraft:generic.movement_speed",Amount:0.05d},{Slot:"offhand",Name:"Modifier",Operation:1,UUID:[I;986714587,-992328412,-1309441710,-1287770970],AttributeName:"minecraft:generic.attack_speed",Amount:0.05d}],HideFlags:2}, Count: 1b}''',
    expected_result_item=r'''{id: "minecraft:bone", tag: {plain:{display:{Name:"Charm of C'Zanil",Lore:["Regeneration I","* Magic Wand *","King's Valley : Enhanced Rare","Ephemeral Corridors","The souls scream, yearning to be released.","","When in Main Hand:","4 Attack Speed","4.5 Attack Damage","","When in Off Hand:","+5% Speed","+2 Max Health","+5% Attack Speed"]}},Enchantments:[{id:"minecraft:fire_aspect",lvl:5s},{id:"minecraft:sharpness",lvl:6s}],AttributeModifiers:[{Name:"Modifier",Slot:"offhand",Operation:0,UUID:[I;-319241543,-679654345,-1253138128,1382611003],AttributeName:"minecraft:generic.max_health",Amount:2.0d},{Name:"Modifier",Slot:"offhand",Operation:1,UUID:[I;267246126,1096762845,-1220294487,-1836843357],AttributeName:"minecraft:generic.movement_speed",Amount:0.05d},{Name:"Modifier",Slot:"offhand",Operation:1,UUID:[I;986714587,-992328412,-1309441710,-1287770970],AttributeName:"minecraft:generic.attack_speed",Amount:0.05d}],display:{Name:'{"extra":[{"bold":true,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"gold","text":"Charm of C\'Zanil"}],"text":""}',Lore:['{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"gray","text":"Regeneration I"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"gray","text":"Tenacity I"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"dark_gray","text":"* Magic Wand *"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"dark_gray","text":"King\'s Valley : "},{"bold":true,"italic":false,"color":"yellow","text":"Enhanced Rare"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"red","text":"Ephemeral Corridors"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"dark_gray","text":"The souls scream, yearning to be released."}],"text":""}','{"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"gray","text":"When in Main Hand:"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"dark_green","text":" 4 Attack Speed"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"dark_green","text":" 4.5 Attack Damage"}],"text":""}','{"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"gray","text":"When in Off Hand:"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"blue","text":"+5% Speed"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"blue","text":"+2 Max Health"}],"text":""}','{"extra":[{"bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"color":"blue","text":"+5% Attack Speed"}],"text":""}']},HideFlags:2}, Count: 1b}'''
)
test_item.run()

